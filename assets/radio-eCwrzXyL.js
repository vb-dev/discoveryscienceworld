import{g as r,F as t,N as f,ae as v,J as l,G as u,l as m,B as c,f as a,L as _,ah as S,ai as b}from"./@vue-NjKOnEGT.js";import{_ as g}from"./index-B6Qm5ypN.js";import"./pinia-BP0IfFWe.js";import"./@townsquarelabs-DM-69Jax.js";import"./@tonconnect-M86Ec7Bf.js";import"./tweetnacl-util-2xfJoBJT.js";import"./classnames-CVOySMdS.js";import"./tweetnacl-B8ikFTel.js";import"./ua-parser-js-BKpq8BhR.js";import"./deepmerge-D8huMqX6.js";import"./axios-C8DqakIB.js";import"./vue-i18n-5Qi6QEAo.js";import"./@intlify-YGwFW6EB.js";import"./vue-router-DZppbSTe.js";import"./vue-cookies-oMoGE7eu.js";/* empty css             */import"./@vuepic-CdScWKV-.js";import"./date-fns-C7_rVUPb.js";import"./vuetify-MtPVAfi-.js";import"./vue-lazyload-Bd2acmnH.js";import"./firebase-DvzBAoB-.js";import"./@firebase-Hco5RtB1.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";const y={data(){return{stations:[],filteredStations:[],selectedStation:null,loading:!0,offset:0,searchQuery:"",favorites:[]}},methods:{selectStation(e){this.selectedStation=e},async fetchRadioStations(){this.loading=!0;const e=`https://de1.api.radio-browser.info/json/stations/topclick/1000?offset=${this.offset}`;try{const h=await(await fetch(e)).json();this.stations.push(...h),this.filteredStations=this.stations}catch(s){console.error("Ошибка загрузки радиостанций:",s)}finally{this.loading=!1}},filterStations(){this.filteredStations=this.stations.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase()))},saveToFavorites(){this.isFavorite(this.selectedStation)?this.removeFromFavorites(this.selectedStation):(this.favorites.push(this.selectedStation),localStorage.setItem("favorites",JSON.stringify(this.favorites)))},isFavorite(e){return this.favorites.some(s=>s.stationuuid===e.stationuuid)},removeFromFavorites(e){this.favorites=this.favorites.filter(s=>s.stationuuid!==e.stationuuid),localStorage.setItem("favorites",JSON.stringify(this.favorites))},loadMoreStations(){this.offset+=1e3,this.fetchRadioStations()},loadFavorites(){const e=localStorage.getItem("favorites");e&&(this.favorites=JSON.parse(e))}},watch:{searchQuery(){this.filterStations()}},mounted(){this.fetchRadioStations(),this.loadFavorites()}},n=e=>(S("data-v-9d824ad9"),e=e(),b(),e),F=n(()=>t("br",null,null,-1)),w=n(()=>t("br",null,null,-1)),k=n(()=>t("br",null,null,-1)),C=n(()=>t("br",null,null,-1)),N=n(()=>t("br",null,null,-1)),I=n(()=>t("br",null,null,-1)),M={class:"radio-player container text-white"},x={class:"dropdown my-3"},B={class:"btn btn-danger1 dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},L={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Q=["onClick"],R={key:0,class:"text-white"},T=["src"],J={key:1,class:"spinner-border text-primary",role:"status"},V=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),O=[V],j={key:2},D={key:3,class:"favorites-section"},U=["onClick"],A={key:4},E=n(()=>t("br",null,null,-1)),G=n(()=>t("br",null,null,-1)),q=n(()=>t("br",null,null,-1)),z=n(()=>t("br",null,null,-1));function H(e,s,h,K,o,d){return a(),r(u,null,[F,w,k,C,N,I,t("div",M,[f(t("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>o.searchQuery=i),type:"text",class:"form-control my-3",placeholder:"Search for a station..."},null,512),[[v,o.searchQuery]]),t("div",x,[t("button",B,l(o.selectedStation?o.selectedStation.name:e.$t("Select Station")),1),t("ul",L,[(a(!0),r(u,null,m(o.filteredStations,(i,p)=>(a(),r("li",{key:p,class:"dropdown-item",onClick:P=>d.selectStation(i)},l(i.name),9,Q))),128))])]),o.selectedStation?(a(),r("div",R,[t("h3",null,l(o.selectedStation.name),1),t("p",null,l(o.selectedStation.country)+" | "+l(o.selectedStation.language),1),t("audio",{controls:"",src:o.selectedStation.url_resolved,autoplay:""},null,8,T),t("button",{class:"btn btn-danger1 mt-2",onClick:s[1]||(s[1]=(...i)=>d.saveToFavorites&&d.saveToFavorites(...i))},l(d.isFavorite(o.selectedStation)?"Remove from Favorites":"Add to Favorites"),1)])):c("",!0),o.loading?(a(),r("div",J,O)):c("",!0),!o.loading&&o.stations.length===0?(a(),r("div",j,[t("p",null,l(e.$t("No stations available")),1)])):c("",!0),o.favorites.length>0?(a(),r("div",D,[t("ul",null,[(a(!0),r(u,null,m(o.favorites,i=>(a(),r("li",{key:i.stationuuid},[_(l(i.name)+" ",1),t("button",{class:"btn btn-danger btn-sm",onClick:p=>d.removeFromFavorites(i)},l(e.$t("Remove")),9,U)]))),128))])])):c("",!0),o.stations.length>0&&!o.loading?(a(),r("div",A,[t("button",{class:"btn btn-danger1",onClick:s[2]||(s[2]=(...i)=>d.loadMoreStations&&d.loadMoreStations(...i))},l(e.$t("Load More Stations")),1)])):c("",!0),E,G,q,z])],64)}const bt=g(y,[["render",H],["__scopeId","data-v-9d824ad9"]]);export{bt as default};
