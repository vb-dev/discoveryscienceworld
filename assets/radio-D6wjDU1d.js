import{g as r,F as t,N as v,ae as f,J as a,G as h,l as m,B as c,f as l,L as _,ah as S,ai as b}from"./@vue-NjKOnEGT.js";import{_ as y}from"./index-jqf3sAwh.js";import"./pinia-BP0IfFWe.js";import"./@townsquarelabs-DM-69Jax.js";import"./@tonconnect-M86Ec7Bf.js";import"./tweetnacl-util-2xfJoBJT.js";import"./classnames-CVOySMdS.js";import"./tweetnacl-B8ikFTel.js";import"./ua-parser-js-BKpq8BhR.js";import"./deepmerge-D8huMqX6.js";import"./axios-C8DqakIB.js";import"./vue-i18n-5Qi6QEAo.js";import"./@intlify-YGwFW6EB.js";import"./vue-router-DZppbSTe.js";import"./vue-cookies-oMoGE7eu.js";/* empty css             */import"./@vuepic-CdScWKV-.js";import"./date-fns-C7_rVUPb.js";import"./vuetify-MtPVAfi-.js";import"./vue-lazyload-Bd2acmnH.js";import"./firebase-DvzBAoB-.js";import"./@firebase-Hco5RtB1.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";const g={data(){return{stations:[],filteredStations:[],selectedStation:null,loading:!0,offset:0,searchQuery:"",favorites:[]}},methods:{selectStation(e){this.selectedStation=e},async fetchRadioStations(){this.loading=!0;const e=`https://de1.api.radio-browser.info/json/stations/topclick/1000?offset=${this.offset}`;try{const p=await(await fetch(e)).json();this.stations.push(...p),this.filteredStations=this.stations}catch(s){console.error("Ошибка загрузки радиостанций:",s)}finally{this.loading=!1}},filterStations(){this.filteredStations=this.stations.filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase()))},saveToFavorites(){this.isFavorite(this.selectedStation)?this.removeFromFavorites(this.selectedStation):(this.favorites.push(this.selectedStation),localStorage.setItem("favorites",JSON.stringify(this.favorites)))},isFavorite(e){return this.favorites.some(s=>s.stationuuid===e.stationuuid)},removeFromFavorites(e){this.favorites=this.favorites.filter(s=>s.stationuuid!==e.stationuuid),localStorage.setItem("favorites",JSON.stringify(this.favorites))},playFavoriteStation(e){this.selectStation(e)},loadMoreStations(){this.offset+=1e3,this.fetchRadioStations()},loadFavorites(){const e=localStorage.getItem("favorites");e&&(this.favorites=JSON.parse(e))}},watch:{searchQuery(){this.filterStations()}},mounted(){this.fetchRadioStations(),this.loadFavorites()}},n=e=>(S("data-v-657a1d77"),e=e(),b(),e),F=n(()=>t("br",null,null,-1)),k=n(()=>t("br",null,null,-1)),w=n(()=>t("br",null,null,-1)),C=n(()=>t("br",null,null,-1)),N=n(()=>t("br",null,null,-1)),I=n(()=>t("br",null,null,-1)),M={class:"radio-player container text-white"},x={class:"dropdown my-3"},B={class:"btn btn-danger1 dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},L={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},Q=["onClick"],R={key:0,class:"text-white"},T=["src"],J={key:1,class:"spinner-border text-primary",role:"status"},V=n(()=>t("span",{class:"visually-hidden"},"Loading...",-1)),O=[V],j={key:2},D={key:3,class:"favorites-section"},U=["onClick"],A=["onClick"],E={key:4},G=n(()=>t("br",null,null,-1)),q=n(()=>t("br",null,null,-1)),z=n(()=>t("br",null,null,-1)),H=n(()=>t("br",null,null,-1));function K(e,s,p,P,o,d){return l(),r(h,null,[F,k,w,C,N,I,t("div",M,[v(t("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>o.searchQuery=i),type:"text",class:"form-control my-3",placeholder:"Search for a station..."},null,512),[[f,o.searchQuery]]),t("div",x,[t("button",B,a(o.selectedStation?o.selectedStation.name:e.$t("Select Station")),1),t("ul",L,[(l(!0),r(h,null,m(o.filteredStations,(i,u)=>(l(),r("li",{key:u,class:"dropdown-item",onClick:W=>d.selectStation(i)},a(i.name),9,Q))),128))])]),o.selectedStation?(l(),r("div",R,[t("h3",null,a(o.selectedStation.name),1),t("p",null,a(o.selectedStation.country)+" | "+a(o.selectedStation.language),1),t("audio",{controls:"",src:o.selectedStation.url_resolved,autoplay:""},null,8,T),t("button",{class:"btn btn-danger1 mt-2",onClick:s[1]||(s[1]=(...i)=>d.saveToFavorites&&d.saveToFavorites(...i))},a(d.isFavorite(o.selectedStation)?"Remove from Favorites":"Add to Favorites"),1)])):c("",!0),o.loading?(l(),r("div",J,O)):c("",!0),!o.loading&&o.stations.length===0?(l(),r("div",j,[t("p",null,a(e.$t("No stations available")),1)])):c("",!0),o.favorites.length>0?(l(),r("div",D,[t("ul",null,[(l(!0),r(h,null,m(o.favorites,i=>(l(),r("li",{key:i.stationuuid,onClick:u=>d.playFavoriteStation(i),class:"favorite-station"},[_(a(i.name)+" ",1),t("button",{class:"btn btn-danger btn-sm",onClick:u=>d.removeFromFavorites(i)},a(e.$t("Remove")),9,A)],8,U))),128))])])):c("",!0),o.stations.length>0&&!o.loading?(l(),r("div",E,[t("button",{class:"btn btn-danger1",onClick:s[2]||(s[2]=(...i)=>d.loadMoreStations&&d.loadMoreStations(...i))},a(e.$t("Load More Stations")),1)])):c("",!0),G,q,z,H])],64)}const yt=y(g,[["render",K],["__scopeId","data-v-657a1d77"]]);export{yt as default};
